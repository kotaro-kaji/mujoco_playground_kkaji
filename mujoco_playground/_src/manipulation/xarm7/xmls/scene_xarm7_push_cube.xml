<!-- XArm7 PushCube scene (Stage 1): standalone MJCF for visual validation. -->
<mujoco model="xarm7_push_cube">
  <!-- Use RoboManipBaselines assets (meshes/textures) via relative paths. -->
  <!-- Local copies: assets live under ./assets relative to this file. -->
  <compiler angle="radian"
            autolimits="true"
            meshdir="assets/meshes"
            texturedir="."/>

  <option timestep="0.004" integrator="implicitfast"/>
  <size memory="2M"/>
  <statistic extent="2.0"/>

  <visual>
    <headlight diffuse="0.6 0.6 0.6" ambient="0.1 0.1 0.1" specular="0.0 0.0 0.0"/>
    <rgba haze="1.0 1.0 1.0 1.0"/>
    <global azimuth="150" elevation="-20"/>
  </visual>

  <asset>
    <texture type="skybox" builtin="gradient" rgb1="0.9 1.0 1.0" rgb2="0.9 1.0 1.0" width="512" height="3072"/>
    <texture name="floor" file="assets/textures/floor/floor1.png" type="2d"/>
    <material name="floor" texture="floor" specular="0.2" shininess="0.3"/>
    <texture name="wall" file="assets/textures/wall/wall1.png" type="cube"/>
    <material name="wall" texture="wall" specular="0.2" shininess="0.3"/>
    <texture name="table" file="assets/textures/general/metal1.png" type="cube"/>
    <material name="table" texture="table" rgba="0.31 0.55 0.30 1.0" specular="0.5" shininess="1.0"/>
    <!-- Panda-style box textures/materials -->
    <texture name="box" type="cube"
      fileup="../../franka_emika_panda_robotiq/assets/fileup.png"
      fileback="../../franka_emika_panda_robotiq/assets/fileback.png"
      filedown="../../franka_emika_panda_robotiq/assets/filedown.png"
      filefront="../../franka_emika_panda_robotiq/assets/filefront.png"
      fileleft="../../franka_emika_panda_robotiq/assets/fileleft.png"
      fileright="../../franka_emika_panda_robotiq/assets/fileright.png"/>
    <material name="box" texture="box"/>
    <texture name="box_alpha" type="cube"
      fileup="../../franka_emika_panda_robotiq/assets/fileup_light.png"
      fileback="../../franka_emika_panda_robotiq/assets/fileback_light.png"
      filedown="../../franka_emika_panda_robotiq/assets/filedown_light.png"
      filefront="../../franka_emika_panda_robotiq/assets/filefront_light.png"
      fileleft="../../franka_emika_panda_robotiq/assets/fileleft_light.png"
      fileright="../../franka_emika_panda_robotiq/assets/fileright_light.png"/>
    <material name="box_alpha" texture="box_alpha"/>
  </asset>

  <!-- XArm7 robot model and actuators -->
  <include file="robots/xarm7/xarm7_config.xml"/>

  <worldbody>
    <light pos="0 0 1.5" dir="0 0 -1" directional="true" diffuse="0.3 0.3 0.3"/>

    <camera name="front" mode="fixed" pos="0.65 0.0 1.5" euler="0.0 0.785398 1.5708"/>
    <camera name="side" mode="fixed" pos="0.0 -0.85 0.95" euler="1.5708 0.0 0.0"/>

    <!-- Workspace -->
    <geom name="floor" size="0 0 0.05" type="plane" material="floor"/>
    <geom name="wall" type="box" size="10 10 0.01" pos="0 0 10" zaxis="0 0 1" material="wall"/>

    <body name="table">
      <geom type="box" size="0.3 0.45 0.019" pos="0 0 0.721" material="table"/>
      <geom type="box" size="0.025 0.025 0.351" pos="0.23 0.34 0.351" material="table"/>
      <geom type="box" size="0.025 0.025 0.351" pos="-0.23 0.34 0.351" material="table"/>
      <geom type="box" size="0.025 0.025 0.351" pos="0.23 -0.34 0.351" material="table"/>
      <geom type="box" size="0.025 0.025 0.351" pos="-0.23 -0.34 0.351" material="table"/>
    </body>

    <!-- Robot root pose (tuned to place base near table as in examples) -->
    <body name="xarm7_root_frame" pos="-0.22 0.0 0.74">
      <include file="robots/xarm7/xarm7_body.xml"/>
    </body>

    <!-- Push target object: Panda-compatible size/material -->
    <body name="box" pos="0.15 0.0 0.74">
      <freejoint name="box_joint"/>
      <geom type="box" name="box" size="0.07553 0.11482 0.05073" condim="3"
        friction="0.6" contype="2" conaffinity="1" solref="0.02 1" priority="1"
        mass="0.15" material="box"/>
    </body>

    <!-- Goal mocap target: same size, translucent material -->
    <body name="mocap_target" mocap="true" pos="0.15 0.05 0.76">
      <geom type="box" size="0.07553 0.11482 0.05073" contype="0" conaffinity="0" material="box_alpha"/>
    </body>
  </worldbody>

  <!-- Keep contact behavior simple for stage 1 visual check -->
  <contact>
    <exclude body1="xarm7_body" body2="box"/>
  </contact>

  <!-- Minimal keyframe placeholder (not used by viewer) -->
  <keyframe>
    <key name="home"/>
  </keyframe>
</mujoco>
