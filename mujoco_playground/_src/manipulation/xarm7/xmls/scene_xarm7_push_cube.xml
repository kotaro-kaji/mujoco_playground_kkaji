<!-- XArm7 PushCube scene (Stage 1): standalone MJCF for visual validation. -->
<mujoco model="xarm7_push_cube">
  <!-- Use RoboManipBaselines assets (meshes/textures) via relative paths. -->
  <!-- Local copies: assets live under ./assets relative to this file. -->
  <compiler angle="radian"
            autolimits="true"
            meshdir="assets/meshes"
            texturedir="."/>

  <option timestep="0.004" integrator="implicitfast"/>
  <size memory="2M"/>
  <statistic extent="2.0"/>

  <visual>
    <headlight diffuse="0.6 0.6 0.6" ambient="0.1 0.1 0.1" specular="0.0 0.0 0.0"/>
    <rgba haze="1.0 1.0 1.0 1.0"/>
    <global azimuth="150" elevation="-20"/>
  </visual>

  <asset>
    <texture type="skybox" builtin="gradient" rgb1="0.9 1.0 1.0" rgb2="0.9 1.0 1.0" width="512" height="3072"/>
    <texture name="floor" file="assets/textures/floor/floor1.png" type="2d"/>
    <material name="floor" texture="floor" specular="0.2" shininess="0.3"/>
    <texture name="wall" file="assets/textures/wall/wall1.png" type="cube"/>
    <material name="wall" texture="wall" specular="0.2" shininess="0.3"/>
    <texture name="table" file="assets/textures/general/metal1.png" type="cube"/>
    <material name="table" texture="table" rgba="0.31 0.55 0.30 1.0" specular="0.5" shininess="1.0"/>
    <!-- Panda-style box textures/materials -->
    <texture name="box" type="cube"
      fileup="../../franka_emika_panda_robotiq/assets/fileup.png"
      fileback="../../franka_emika_panda_robotiq/assets/fileback.png"
      filedown="../../franka_emika_panda_robotiq/assets/filedown.png"
      filefront="../../franka_emika_panda_robotiq/assets/filefront.png"
      fileleft="../../franka_emika_panda_robotiq/assets/fileleft.png"
      fileright="../../franka_emika_panda_robotiq/assets/fileright.png"/>
    <material name="box" texture="box"/>
    <texture name="box_alpha" type="cube"
      fileup="../../franka_emika_panda_robotiq/assets/fileup_light.png"
      fileback="../../franka_emika_panda_robotiq/assets/fileback_light.png"
      filedown="../../franka_emika_panda_robotiq/assets/filedown_light.png"
      filefront="../../franka_emika_panda_robotiq/assets/filefront_light.png"
      fileleft="../../franka_emika_panda_robotiq/assets/fileleft_light.png"
      fileright="../../franka_emika_panda_robotiq/assets/fileright_light.png"/>
    <material name="box_alpha" texture="box_alpha"/>
  </asset>

  <!-- XArm7 robot model and actuators -->
  <include file="robots/xarm7/xarm7_config.xml"/>

  <worldbody>
    <light pos="0 0 1.5" dir="0 0 -1" directional="true" diffuse="0.3 0.3 0.3"/>

    <camera name="front" mode="fixed" pos="0.65 0.0 1.5" euler="0.0 0.785398 1.5708"/>
    <camera name="side" mode="fixed" pos="0.0 -0.85 0.95" euler="1.5708 0.0 0.0"/>

    <!-- Workspace -->
    <geom name="floor" size="0 0 0.05" type="plane" material="floor"/>
    <geom name="wall" type="box" size="10 10 0.01" pos="0 0 10" zaxis="0 0 1" material="wall"/>

    <body name="table">
      <geom type="box" size="0.3 0.45 0.019" pos="0 0 0.721" material="table"/>
      <geom type="box" size="0.025 0.025 0.351" pos="0.23 0.34 0.351" material="table"/>
      <geom type="box" size="0.025 0.025 0.351" pos="-0.23 0.34 0.351" material="table"/>
      <geom type="box" size="0.025 0.025 0.351" pos="0.23 -0.34 0.351" material="table"/>
      <geom type="box" size="0.025 0.025 0.351" pos="-0.23 -0.34 0.351" material="table"/>
    </body>

    <!-- Robot root pose (tuned to place base near table as in examples) -->
    <body name="xarm7_root_frame" pos="-0.22 0.0 0.74">
      <include file="robots/xarm7/xarm7_body.xml"/>
    </body>

    <!-- Push target object: Panda-compatible size/material -->
    <body name="box" pos="0.15 0.0 0.74">
      <freejoint name="box_joint"/>
      <geom type="box" name="box" size="0.07553 0.11482 0.05073" condim="3"
        friction="0.6" contype="2" conaffinity="1" solref="0.02 1" priority="1"
        mass="0.15" material="box"/>
    </body>

    <!-- Goal mocap target: same size, translucent material -->
    <body name="mocap_target" mocap="true" pos="0.15 0.05 0.74">
      <geom type="box" size="0.07553 0.11482 0.05073" contype="0" conaffinity="0" material="box_alpha"/>
    </body>
  </worldbody>

  <!-- Keep contact behavior simple for stage 1 visual check -->
  <contact>
    <exclude body1="xarm7_body" body2="box"/>
  </contact>

  <!-- Minimal keyframe placeholder (not used by viewer) -->
  <keyframe>

    <key
    time="189.444"
    qpos="3.75171e-06 -0.129327 -5.7737e-05 0.2 -1.21319e-05 0.0613702 -6.11298e-06 0.0755654 0.0722899 0.0822596 0.0755611 0.0722663 0.0822746 0.95 7.99902e-15 0.0507033 1 1.755e-17 3.79286e-19 3.06605e-17"
    qvel="6.4689e-09 -0.00142793 -6.15817e-07 -0.00150944 -4.68998e-08 -7.76245e-05 -3.8472e-08 0.000360577 0.000368556 0.000364184 0.00036033 0.000368109 0.000363917 -1.18192e-17 4.12517e-17 5.99812e-16 -6.99629e-16 -1.88595e-16 5.05123e-18"
    ctrl="0 -0.792335 0 1.24965 0 0 0 0"
    mpos="0.95 0.05 0.74"
    mquat="1 0 0 0"
    />

    <key name="home"
    time="337.764"
    qpos="-1.0972e-19 -0.580257 -0.0002902 0.306593 -5.70171e-05 -0.674913 -6.283 0.00262288 0.00296404 0.00262316 0.00262286 0.00296395 0.00262318 0.95 1.39428e-14 0.0507033 1 1.51848e-17 7.23009e-19 7.42472e-18"
    qvel="1.79429e-17 1.34504e-14 -3.41405e-17 6.36304e-15 1.68332e-16 -1.34252e-14 -1.08358e-13 -1.84808e-17 -1.69111e-15 5.87368e-16 3.21597e-18 1.87915e-15 -4.62187e-16 3.93253e-19 2.21929e-17 -5.74399e-17 -3.3853e-16 1.25733e-17 -5.96964e-18"
    ctrl="0 -0.584685 0 0.322875 0 -0.67765 -6.283 0"
    mpos="0.95 0.05 0.74"
    mquat="1 0 0 0"
    />
  </keyframe>


  
</mujoco>
