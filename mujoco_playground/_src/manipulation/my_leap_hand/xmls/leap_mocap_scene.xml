<mujoco model="leap_mocap_scene">
  <!-- Keep relative mesh resolution local to this file -->
  <compiler meshdir=""/>

  <!-- Include the LEAP Hand model (root body name: leap_mount) -->
  <include file="leap_rh_mjx.xml"/>

  <!-- Stable-ish defaults for interactive control -->
  <option timestep="0.004" integrator="implicitfast" iterations="10" ls_iterations="20"/>

  <asset>
    <!-- Checker grid for ground -->
    <texture name="grid_tex" type="2d" builtin="checker" width="512" height="512"
             rgb1="0.22 0.22 0.22" rgb2="0.28 0.28 0.28"/>
    <material name="grid_mat" texture="grid_tex" texrepeat="40 40" texuniform="true"/>
  </asset>

  <worldbody>
    <!-- Kinematic target: driven externally via data.mocap_pos / data.mocap_quat -->
    <body name="hand_target" mocap="true" pos="0 0 0.8" quat="1 0 0 0">
      <site name="hand_target_site" size="0.01" rgba="0 1 0 0.6"/>
    </body>

    <!-- Optional helpers -->
    <geom type="plane" name="floor" pos="0 0 -0.5" size="0 0 0.01" contype="0" conaffinity="0"
          material="grid_mat" rgba="1 1 1 1"/>
    <camera name="cam" pos="1.2 0.0 0.9" xyaxes="0.0 -1.0 0.0 0.4 0.0 0.9"/>
  </worldbody>

  <!-- Rigidly attach LEAP root to the mocap target -->
  <equality>
    <!-- Overdamped weld to eliminate oscillations -->
    <weld body1="hand_target" body2="leap_mount" solref="0.01 2" solimp="0.98 0.995 0.001" relpose="0 0 0 1 0 0 0"/>
  </equality>
</mujoco>


